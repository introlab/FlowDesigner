%define name     flowdesigner
%define distname @PACKAGE@
%define ver      @VERSION@
%define rel      1

Summary: A visual data-flow language
Name: %name
Version: %ver
Release: %rel
License: GPL/LGPL
Group: Application/Devel
Source: http://download.sourceforge.net/flowdesigner/%{distname}-%{ver}.tar.gz
URL: http://flowdesigner.sourceforge.net/
Vendor: Laborius
Packager: Dominic Letourneau (dominic.letourneau@usherbrooke.ca)

BuildRoot: %{_tmppath}/root-%{name}-%{version}

%description
FlowDesigner is a free (GPL) "data flow oriented" development environment. It
works by visually connecting basic nodes into a network in order to create
complex applications.  It can be used as a rapid development tool, but also in 
real-time applications. The design has been done in C++ and allows toolkits 
to be easily added. 

%prep
%setup -n %distname-%ver

%build
#export CXXFLAGS='-O2 -march=pentium'
#export CFLAGS='-O2 -march=pentium'
./configure --prefix=/usr --disable-static --enable-qtflow --enable-octave --enable-lapackflow
%{__make} -j8

%install
%makeinstall

%post -p /sbin/ldconfig
%postun -p /sbin/ldconfig

%files
%defattr(-, root, root, 0755)
/usr/lib/libflow*
/usr/bin/flowdesigner-qt
/usr/bin/qtflow
/usr/bin/texflow
/usr/bin/batchflow
/usr/bin/codeflow
/usr/bin/docflow
/usr/bin/gflow
/usr/bin/info2def.pl
/usr/bin/flowdesigner-config
/usr/bin/flowdesigner
/usr/lib/flowdesigner
/usr/include/flowdesigner
/usr/share/flowdesigner
