dnl Process this file with autoconf to produce a configure script. -*-m4-*-

AC_INIT(src/FFT.cc)

dnl Stolen from gtk+:

FLOWDESIGNER_MAJOR_VERSION=0
FLOWDESIGNER_MINOR_VERSION=9
FLOWDESIGNER_MICRO_VERSION=1
FLOWDESIGNER_VERSION=$FLOWDESIGNER_MAJOR_VERSION.$FLOWDESIGNER_MINOR_VERSION.$FLOWDESIGNER_MICRO_VERSION
FLOWDESIGNER_INTERFACE_AGE=0
FLOWDESIGNER_BINARY_AGE=0


AC_SUBST(FLOWDESIGNER_MAJOR_VERSION)
AC_SUBST(FLOWDESIGNER_MINOR_VERSION)
AC_SUBST(FLOWDESIGNER_MICRO_VERSION)
AC_SUBST(FLOWDESIGNER_INTERFACE_AGE)
AC_SUBST(FLOWDESIGNER_BINARY_AGE)
AC_SUBST(FLOWDESIGNER_VERSION)

# libtool versioning
LT_RELEASE=$FLOWDESIGNER_MAJOR_VERSION.$FLOWDESIGNER_MINOR_VERSION
LT_CURRENT=`expr $FLOWDESIGNER_MICRO_VERSION - $FLOWDESIGNER_INTERFACE_AGE`
LT_REVISION=$FLOWDESIGNER_INTERFACE_AGE
LT_AGE=`expr $FLOWDESIGNER_BINARY_AGE - $FLOWDESIGNER_INTERFACE_AGE`
AC_SUBST(LT_RELEASE)
AC_SUBST(LT_CURRENT)
AC_SUBST(LT_REVISION)
AC_SUBST(LT_AGE)

# For automake.
VERSION=$FLOWDESIGNER_VERSION
PACKAGE=audio_blocks


AM_INIT_AUTOMAKE($PACKAGE, $VERSION, no-define)
AM_MAINTAINER_MODE

AC_CANONICAL_HOST
AC_DISABLE_STATIC
#CYGWIN LDFLAGS ADDITION
case $host_os in
  *cygwin* ) CYGWIN="yes";;
         * ) CYGWIN="no";;
esac


if test "$CYGWIN" = "yes"; then
	AC_LIBTOOL_WIN32_DLL
	CYGWIN_LDFLAGS="-no-undefined"
else
	CYGWIN_LDFLAGS=""
fi

AM_CONDITIONAL(WITH_CYGWIN, test "$CYGWIN" = "yes")
AC_SUBST(CYGWIN_LDFLAGS)
AM_PROG_LIBTOOL

AC_FLOWDESIGNER_CHECKS

#ALSA 
PKG_CHECK_MODULES(ALSA, alsa >= 0.9,[ALSA_FOUND="yes"],[ALSA_FOUND="no"])
if test "$ALSA_FOUND" = "yes"; then
        AC_MSG_RESULT([Using ALSA lib : $ALSA_LIBS])
        AC_MSG_RESULT([Using ALSA cflags : $ALSA_CFLAGS])
        AM_CONDITIONAL(ALSA_FOUND,true)
else
        AC_MSG_RESULT([ALSA >= 0.9 not found, disabled])
        AM_CONDITIONAL(ALSA_FOUND,false)
fi

#SPEEX
PKG_CHECK_MODULES(SPEEX, speex >= 1.1.14, [SPEEX_FOUND="yes"], [SPEEX_FOUND="no"])
if test "$SPEEX_FOUND" = "yes"; then
        AC_MSG_RESULT([Using Speex lib : $SPEEX_LIBS])
        AC_MSG_RESULT([Using Speex cflags : $SPEEX_CFLAGS])
        AM_CONDITIONAL(SPEEX_FOUND,true)
else
        AC_MSG_RESULT([Speex >= 1.1.14 not found, disabled])
        AM_CONDITIONAL(SPEEX_FOUND,false)
fi



AM_CONDITIONAL(WITH_SPEEX,test "$SPEEX_FOUND" = "yes")

AC_OUTPUT([Makefile include/Makefile src/Makefile \
	n-files/Makefile \
	])


